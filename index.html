<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»Šå¤©åƒä»€éº¼ ğŸ› (FF)</title>
    <style>
        :root {
            --bg-color: #FFF9EB;
            --card-bg: #FFFFFF;
            --accent: #FF8D8D;
            --sub-accent: #FFD966;
            --text-color: #5D4037;
        }

        body {
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; margin: 0;
        }

        .card {
            background: var(--card-bg);
            width: 85%; max-width: 380px;
            padding: 30px 25px; border-radius: 40px;
            box-shadow: 0 10px 0px #F0E5D0;
            text-align: center; border: 3px solid #5D4037;
        }

        .icon-header { font-size: 50px; margin-bottom: 5px; animation: float 3s infinite ease-in-out; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        h1 { font-size: 24px; margin: 0 0 5px; color: #5D4037; font-weight: 900; }
        .tag { font-size: 11px; color: #9E7E6B; background: #FDF1D6; padding: 4px 10px; border-radius: 20px; display: inline-block; margin-bottom: 20px; }

        .form-grid { text-align: left; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; }
        .form-group { text-align: left; margin-bottom: 12px; }
        .full-width { grid-column: span 2; }
        
        label { font-size: 13px; font-weight: bold; margin-bottom: 5px; display: block; margin-left: 5px; }
        
        select {
            width: 100%; padding: 10px; border-radius: 15px;
            border: 2px solid #5D4037; background: #fff;
            font-size: 15px; color: #5D4037; outline: none; appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%235D4037' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat; background-position: right 10px center; background-size: 12px;
        }

        /* ç‡Ÿæ¥­ä¸­é–‹é—œæ¨£å¼ */
        .switch-group {
            display: flex; justify-content: space-between; align-items: center;
            background: #FDF1D6; padding: 10px 15px; border-radius: 20px; margin-bottom: 15px;
            border: 2px solid #5D4037;
        }
        .switch { position: relative; display: inline-block; width: 46px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc; transition: .4s; border-radius: 24px;
        }
        .slider:before {
            position: absolute; content: ""; height: 16px; width: 16px; left: 4px; bottom: 4px;
            background-color: white; transition: .4s; border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(22px); }

        .btn {
            width: 100%; padding: 18px; border-radius: 25px;
            border: 2px solid #5D4037; font-size: 18px; font-weight: 900;
            cursor: pointer; margin-top: 5px; background: var(--sub-accent);
            color: #5D4037; box-shadow: 0 6px 0 #5D4037; transition: 0.1s;
        }
        .btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #5D4037; }

        #loader-container { display: none; margin-top: 15px; }
        .progress-bar { width: 100%; height: 8px; background: #eee; border-radius: 5px; overflow: hidden; border: 1px solid #5D4037; }
        .progress-fill { width: 0%; height: 100%; background: var(--accent); transition: width 0.2s; }
    </style>
</head>
<body>

<div class="card">
    <div class="icon-header">ğŸ¥˜</div>
    <h1>ç¾é£Ÿæ¢éšªéšŠ</h1>
    <div class="tag">ğŸ“ ç§’é€Ÿå®šä½ Ã— ç‡Ÿæ¥­éæ¿¾ Ã— é«˜éš¨æ©Ÿ</div>

    <div class="form-grid">
        <div class="form-group">
            <label>ğŸƒ è·é›¢ç¯„åœ</label>
            <select id="distance">
                <option value="1000">ğŸš¶ 1km</option>
                <option value="3000">ğŸ›µ 3km</option>
                <option value="5000">ğŸš— 5km</option>
            </select>
        </div>
        <div class="form-group">
            <label>ğŸ’° é ç®—å€é–“</label>
            <select id="price">
                <option value="ä¾¿å®œ">200å…§</option>
                <option value="å¹³åƒ¹">400å…§</option>
                <option value="å¥¢è¯">400â†‘</option>
            </select>
        </div>
        <div class="form-group full-width">
            <label>ğŸ˜‹ æˆ‘æƒ³åƒ...</label>
            <select id="style">
                <option value="å°å¼æ–™ç†">ğŸ‡¹ğŸ‡¼ å°å¼</option>
                <option value="æ—¥å¼æ–™ç†">ğŸ‡¯ğŸ‡µ æ—¥å¼</option>
                <option value="ä¸­å¼æ–™ç†">ğŸ¥¢ ä¸­å¼</option>
                <option value="ç¾å¼é¤å»³">ğŸ” ç¾å¼</option>
                <option value="éŸ“å¼æ–™ç†">ğŸ‡°ğŸ‡· éŸ“å¼</option>
                <option value="ä¾¿åˆ©å•†åº—">ğŸª è¶…å•†/è¼•é£Ÿ</option>
            </select>
        </div>
        <div class="form-group full-width">
            <label>â° ç”¨é¤æ™‚æ®µ</label>
            <select id="time">
                <option value="æ—©é¤">æ—©é¤æ™‚æ®µ</option>
                <option value="ä¸­é¤">åˆé¤åˆä¼‘</option>
                <option value="æ™šé¤">æ™šé¤æ”¾é¬†</option>
            </select>
        </div>
    </div>

    <div class="switch-group">
        <span style="font-size: 14px; font-weight: bold; color: #5D4037;">â° åªçœ‹ç›®å‰æœ‰ç‡Ÿæ¥­çš„</span>
        <label class="switch">
            <input type="checkbox" id="openNow" checked>
            <span class="slider"></span>
        </label>
    </div>

    <button id="searchBtn" class="btn" onclick="searchNow()">å¹«æˆ‘æŒ‘ä¸€å€‹ï¼âœ¨</button>
    
    <div id="loader-container">
        <div class="progress-bar"><div id="p-fill" class="progress-fill"></div></div>
        <p style="font-size: 11px; margin-top: 5px; color: var(--accent); font-weight: bold;">æ­£åœ¨æ‰“äº‚ç¾é£Ÿæ’åº...</p>
    </div>
</div>

<script>
    function searchNow() {
        const btn = document.getElementById('searchBtn');
        const loader = document.getElementById('loader-container');
        const fill = document.getElementById('p-fill');
        
        btn.disabled = true;
        loader.style.display = 'block';
        fill.style.width = '40%';

        const options = { enableHighAccuracy: false, timeout: 2000, maximumAge: 60000 };

        navigator.geolocation.getCurrentPosition((pos) => {
            fill.style.width = '80%';
            const lat = pos.coords.latitude;
            const lng = pos.coords.longitude;
            
            const dist = document.getElementById('distance').value;
            const style = document.getElementById('style').value;
            const price = document.getElementById('price').value;
            const time = document.getElementById('time').value;
            const isOpen = document.getElementById('openNow').checked;

            // é«˜éš¨æ©Ÿå’’èª
            const spells = ["æ¨è–¦", "éš±è—ç‰ˆ", "é«˜è©•åƒ¹", "å··å¼„", "é©šå–œ"];
            const spell = spells[Math.floor(Math.random() * spells.length)];
            
            // ç¸®æ”¾å±¤ç´šï¼š1km ç”¨ 16z è®“ç•«é¢æ›´ç²¾ç¢º
            let zoom = dist == "1000" ? 16 : (dist == "3000" ? 14 : 13);

            // çµ„åˆæœå°‹è©ï¼šåŠ ä¸Šã€Œç¾åœ¨ç‡Ÿæ¥­ã€å­—çœ¼åŠ å¼· Google åˆ¤æ–·
            let queryText = `${spell} ${style} ${price} ${time}`;
            if(isOpen) queryText += " ç‡Ÿæ¥­ä¸­";
            
            const query = encodeURIComponent(queryText);
            
            // é—œéµï¼šåŠ å…¥ lrd=0x0:0x0,1 åƒæ•¸å˜—è©¦å¼·åˆ¶ Google é¡¯ç¤ºåˆ—è¡¨
            // åŠ å…¥ open=1 åƒæ•¸ (éƒ¨åˆ†åœ°åœ–ç‰ˆæœ¬æ”¯æ´)
            const openParam = isOpen ? "&lrd=0x0:0x0,1" : "";
            const t = new Date().getTime();
            
            const mapUrl = `https://www.google.com/maps/search/${query}/@${lat},${lng},${zoom}z?authuser=0&entry=ttu&t=${t}${openParam}`;

            setTimeout(() => {
                fill.style.width = '100%';
                window.open(mapUrl, '_blank');
                btn.disabled = false;
                loader.style.display = 'none';
                fill.style.width = '0%';
            }, 300);
            
        }, (error) => {
            const style = document.getElementById('style').value;
            window.open(`https://www.google.com/maps/search/${encodeURIComponent(style + ' é™„è¿‘ ç‡Ÿæ¥­ä¸­')}`, '_blank');
            btn.disabled = false;
            loader.style.display = 'none';
        }, options);
    }
</script>

</body>
</html>
